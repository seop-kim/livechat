<html layout:decorate="~{global/user_layout}">
<head>
    <meta charset="UTF-8">
    <title>ChatRoom</title>
    <script th:inline="javascript">
        const username = /*[[${username}]]*/ 'guest';
    </script>
    <script th:inline="javascript">
        $(document).ready(function () {
            const roomName = /*[[${roomName}]]*/ null;
            console.log('room name : ', roomName);

            $("#btn-create").on("click", function (e) {
                e.preventDefault();
                const name = $("input[name='name']").val().trim();

                if (!name) {
                    alert("Please write the name.");
                } else {
                    alert('[ ' +name + ` ] 방이 개설되었습니다.`);
                    $("form").off('submit').submit(); // 폼 제출 이벤트 리스너 제거 후 제출
                }
            });
        });
    </script>
</head>
<body layout:fragment="content">
<div>
    <div>
        <ul th:each="room : ${list}">
            <li><a th:href="@{/chat/room(roomId=${room.roomId})}">[[${room.name}]]</a></li>
        </ul>
    </div>
</div>
<form th:action="@{/chat/room}" method="post">
    <input type="text" name="name" class="form-control">
    <button class="btn btn-secondary" id="btn-create">개설하기</button>
</form>
</body>
</html>